import{d as V,f as c,n as g,q as $,c as n,a as e,k as f,m as w,A as z,B as L,h as _,z as y,w as i,l as D,t as l,F as E,y as b,g as p,o as a,j as H,p as B}from"./index-CEP2_6OW.js";import{u as N,A as S,_ as P}from"./Card.vue_vue_type_script_setup_true_lang-CZBx6Ahm.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-BsPwEnMS.js";const T={class:"space-y-6"},I={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0"},U={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4"},q={class:"flex space-x-2"},R={key:0,class:"flex justify-center py-12"},G={key:1,class:"text-center py-12"},J={class:"mt-1 text-sm text-[#6C737F]"},K={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},O={class:"flex items-center justify-between"},Q={class:"text-lg font-semibold text-[#2B4C7E] truncate"},W={class:"space-y-3"},X={key:0,class:"flex items-start space-x-2"},Y={class:"text-sm text-[#6C737F]"},Z={class:"flex items-center space-x-2 text-xs text-[#6C737F]"},ee={class:"flex justify-between items-center"},se={class:"text-xs text-[#6C737F]"},te={class:"flex space-x-2"},oe={key:3,class:"flex justify-center"},ae={class:"flex space-x-2"},re=["onClick"],ne=12,ce=V({__name:"AssetsList",setup(le){const A=N(),v=c([]),d=c(!1),h=c(1),r=c({search:"",status:""}),F=c(!1),m=g(()=>{let o=v.value;if(r.value.search){const s=r.value.search.toLowerCase();o=o.filter(t=>{var u;return t.name.toLowerCase().includes(s)||((u=t.address)==null?void 0:u.toLowerCase().includes(s))})}return r.value.status&&(o=o.filter(s=>s.status===r.value.status)),o}),k=g(()=>Math.ceil(m.value.length/ne)),C=async()=>{try{d.value=!0;const o=await S.listVisibleAssets();v.value=o}catch(o){console.error("Erro ao carregar ativos:",o)}finally{d.value=!1}},M=()=>{C()},j=o=>new Date(o).toLocaleDateString("pt-BR");return $(()=>{C()}),(o,s)=>(a(),n("div",T,[e("div",I,[e("div",U,[w(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.status=t),class:"px-3 py-2 border border-[#E8ECEF] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#2B4C7E] focus:border-[#2B4C7E]"},[...s[3]||(s[3]=[e("option",{value:""},"Todos os status",-1),e("option",{value:"active"},"Ativo",-1),e("option",{value:"inactive"},"Inativo",-1)])],512),[[z,r.value.status]]),w(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.search=t),type:"text",placeholder:"Buscar ativos...",class:"px-3 py-2 border border-[#E8ECEF] rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#2B4C7E] focus:border-[#2B4C7E]"},null,512),[[L,r.value.search]])]),e("div",q,[_(x,{variant:"outline",size:"sm",onClick:M,loading:d.value},{default:i(()=>[...s[4]||(s[4]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p(" Atualizar ",-1)])]),_:1},8,["loading"]),D(A).isAdmin?(a(),y(x,{key:0,variant:"secondary",size:"sm",onClick:s[2]||(s[2]=t=>F.value=!0)},{default:i(()=>[...s[5]||(s[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),p(" Novo Ativo ",-1)])]),_:1})):f("",!0)])]),d.value&&v.value.length===0?(a(),n("div",R,[...s[6]||(s[6]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#2B4C7E]"},null,-1)])])):m.value.length===0&&!d.value?(a(),n("div",G,[s[7]||(s[7]=e("svg",{class:"mx-auto h-12 w-12 text-[#E8ECEF]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),s[8]||(s[8]=e("h3",{class:"mt-2 text-sm font-medium text-[#6C737F]"},"Nenhum ativo encontrado",-1)),e("p",J,l(r.value.search||r.value.status?"Tente ajustar os filtros de busca.":"Comece criando um novo ativo."),1)])):(a(),n("div",K,[(a(!0),n(E,null,b(m.value,t=>(a(),y(P,{key:t.id,hover:"",clickable:"",onClick:u=>o.$router.push(`/app/assets/${t.id}`)},{header:i(()=>[e("div",O,[e("h3",Q,l(t.name),1),e("span",{class:B(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.status==="active"?"bg-[#7AC29A]/10 text-[#7AC29A]":"bg-[#F87171]/10 text-[#F87171]"])},l(t.status==="active"?"Ativo":"Inativo"),3)])]),footer:i(()=>[e("div",ee,[e("span",se," ID: "+l(t.id.slice(0,8))+"... ",1),e("div",te,[_(x,{variant:"ghost",size:"sm",onClick:H(u=>o.$router.push(`/app/assets/${t.id}`),["stop"])},{default:i(()=>[...s[11]||(s[11]=[p(" Ver detalhes ",-1)])]),_:1},8,["onClick"])])])]),default:i(()=>[e("div",W,[t.address?(a(),n("div",X,[s[9]||(s[9]=e("svg",{class:"w-4 h-4 text-[#6C737F] mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("p",Y,l(t.address),1)])):f("",!0),e("div",Z,[s[10]||(s[10]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,l(j(t.created_at)),1)])])]),_:2},1032,["onClick"]))),128))])),k.value>1?(a(),n("div",oe,[e("nav",ae,[(a(!0),n(E,null,b(k.value,t=>(a(),n("button",{key:t,onClick:u=>h.value=t,class:B(["px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200",h.value===t?"bg-[#2B4C7E] text-white":"text-[#6C737F] hover:bg-[#E8ECEF] hover:text-[#2B4C7E]"])},l(t),11,re))),128))])])):f("",!0)]))}});export{ce as default};
